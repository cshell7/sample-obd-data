(this["webpackJsonpsample-obd-data"]=this["webpackJsonpsample-obd-data"]||[]).push([[0],{13:function(e,t,a){e.exports=a(20)},18:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),o=a.n(r),l=(a(18),a(5)),i=a(9),s=a(3),u=a(12),m=a(1);a(19);var p=function(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],r=t[1],o=function(e){r(e),console.error(e)},p=Object(n.useState)(""),f=Object(m.a)(p,2),b=f[0],j=f[1],v=Object.keys(b||{}).length,O=Object(n.useState)(60),d=Object(m.a)(O,2),h=d[0],g=d[1],E=Object(n.useState)(),y=Object(m.a)(E,2),x=y[0],w=y[1],S=Object(n.useState)(),k=Object(m.a)(S,2),I=k[0],M=k[1],N=Object(n.useState)([]),B=Object(m.a)(N,2),F=B[0],C=B[1],A=Object(n.useState)(0),D=Object(m.a)(A,2),T=D[0],J=D[1],P=Object(n.useState)(!1),R=Object(m.a)(P,2),W=R[0],z=R[1];Object(n.useEffect)((function(){if(!W&&T<v){z(!0);var e=new FileReader;e.readAsText(b[T]),e.onload=function(){var t=e.result.split("\n"),a=Object(u.a)(t),n=a[0],c=a.slice(1),l=n.split(",").length;x&&x!==l?o("Number of columns is not the same accross files. Please try again."):(I||(M(n),w(l)),C([].concat(Object(s.a)(F),Object(s.a)(c))),J(T+1)),z(!1),r("")}}}),[T,v,b,x,I,F,W]);var U=Object(n.useState)(!1),$=Object(m.a)(U,2),q=$[0],G=$[1];Object(n.useEffect)((function(){v>0&&!q&&T===v&&(C(F.filter((function(e,t){return t%h===0}))),G(!0))}),[T,v,F,h,q]);var H=Object(n.useState)(),K=Object(m.a)(H,2),L=K[0],Q=K[1];Object(n.useEffect)((function(){q&&Q([I].concat(Object(s.a)(F)).join("\n"))}),[q,I,F]);var V=Object(n.useState)(!1),X=Object(m.a)(V,2),Y=X[0],Z=X[1];Object(n.useEffect)((function(){q&&!Y&&(M(I.split(",")),C(F.map((function(e){return e.split(",")}))),Z(!0))}),[q,Y,I,F]);var _=Object(n.useState)(),ee=Object(m.a)(_,2),te=ee[0],ae=ee[1];Object(n.useEffect)((function(){Y&&!te&&ae(I.reduce((function(e,t,a){var n=F.map((function(e){return e[a]})),c=n.filter((function(e){return Number.isInteger(parseInt(e))}));return Object(i.a)(Object(i.a)({},e),{},Object(l.a)({},a,{name:t,values:n,max:Math.max.apply(Math,Object(s.a)(c)),min:Math.min.apply(Math,Object(s.a)(c)),avg:c.reduce((function(e,t){return parseInt(e)+parseInt(t)}),0)/c.length}))}),{}))}),[Y,te,I,F]);var ne=null===F||void 0===F?void 0:F.length,ce=Object(n.useState)(),re=Object(m.a)(ce,2),oe=re[0],le=re[1];return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement("h1",null,"OBD2 data sampler"),!!a&&c.a.createElement("p",null,a),c.a.createElement("p",null,"Sample rate: 1 out of every"," ",c.a.createElement("input",{type:"number",onChange:function(e){var t=e.target;return g(t.value)},value:h})),c.a.createElement("input",{type:"file",onChange:function(e){var t=e.target;Object.values(t.files).every((function(e){return"text/csv"===e.type}))?Object.values(t.files).every((function(e){return e.size<1e7}))?j(t.files):(o("File is too large. 10MB max."),j("")):(o("File type is incorrect. Make sure it is a .csv file"),j(""))},multiple:!0,accept:".csv"}),q&&c.a.createElement("a",{href:"data:text/plain;charset=utf-8,".concat(encodeURIComponent(L)),style:{color:"white",marginTop:"16px"},download:"sampled-data.csv"},"Download sampled data")),te&&c.a.createElement("select",{onChange:function(e){var t=e.target;return le(t.value)},value:oe||"",style:{margin:"16px auto",display:"block"}},c.a.createElement("option",{value:""}),Object.entries(te).filter((function(e){var t=Object(m.a)(e,2);t[0];return t[1].values.some((function(e){return Number.isInteger(parseInt(e))}))})).map((function(e){var t=Object(m.a)(e,2),a=t[0],n=t[1].name;return c.a.createElement("option",{key:a,value:a},n)}))),!!oe&&c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"max: ",te[oe].max),c.a.createElement("p",null,"avg: ",te[oe].avg),c.a.createElement("p",null,"min: ",te[oe].min)),c.a.createElement("svg",{viewBox:"0 0 ".concat(800," ").concat(400),width:800,height:400,class:"chart",style:{border:"1px solid gray",marginTop:"16px",marginBottom:"32px"}},!!oe&&c.a.createElement(c.a.Fragment,null,c.a.createElement("polyline",{fill:"none",stroke:"#0074d9","stroke-width":"1",points:te[oe].values.filter((function(e){return Number.isInteger(parseInt(e))})).map((function(e,t){return console.log(800/ne*t),console.log({numberOfDataPoints:ne,index:t}),"".concat(Math.floor(800/ne*t),",").concat(Number.isInteger(parseInt(e))?400-Math.floor(e/te[oe].max*100*4):0)})).join(" ")}),c.a.createElement("polyline",{fill:"none",stroke:"blue","stroke-width":"1",points:"0,".concat(400-Math.floor(te[oe].avg/te[oe].max*100*4)," ").concat(800,",").concat(400-Math.floor(te[oe].avg/te[oe].max*100*4))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.970f9196.chunk.js.map